# render.yaml configuration for Baserow, n8n, and ToolJet in Frankfurt region

services:

  - name: n8n
    type: web
    runtime: image
    plan: free
    image: 
      url: n8nio/n8n:latest
    domains:
      - demo.n8n.nenkod.com
    envVars:
      - key: N8N_BASIC_AUTH_ACTIVE
        value: true

      - key: N8N_BASIC_AUTH_USER
        value: "admin"

      - key: N8N_BASIC_AUTH_PASSWORD
        value: "admin"

      - key: N8N_HOST
        value: "demo.n8n.nenkod.com"
      
    autoDeploy: true
    healthCheckPath: "/"
    region: frankfurt

  - name: nocodb
    type: web
    runtime: image
    plan: free
    image:
      url: nocodb/nocodb:latest
    region: frankfurt

  - name: baserow
    type: web
    runtime: image
    plan: free
    image: 
      url: baserow/baserow
    region: frankfurt

  - name: tooljet
    type: web
    runtime: image
    plan: free
    image:
      url: tooljet/tooljet-ce
    domains:
      - demo.tooljet.nenkod.com
    startCommand: npm run start:prod
    # envVars:
    #   - name: TOOLJET_HOST
    #     value: "http://localhost:80"
    #   - name: PORT
    #     value: "80"
    #   - name: ENABLE_TOOLJET_DB
    #     value: "true"
    #   - name: TOOLJET_DB_HOST
    #     value: "postgres"
    #   - name: TOOLJET_DB_USER
    #     value: "postgres"
    #   - name: TOOLJET_DB_PASS
    #     value: "toor"
    #   - name: LOCKBOX_MASTER_KEY
    #     value: "dd64062b41ee862109c1b92997853a32e93ed0cd33266c3defea5d47a653e018"
    #   - name: SECRET_KEY_BASE
    #     value: "55f07fde92352b48840033bfc7820061594cb6a616ea852e9d83e1130cc0ac403e593002f305ff93fb14538cc720dfac17afcf78ecc7f4f6132880a5e25224ca"
    #   - name: PG_HOST
    #     value: "postgres"
    #   - name: PG_DB
    #     value: "postgres"
    #   - name: PG_USER
    #     value: "postgres"
    #   - name: PG_PASS
    #     value: "toor"
    #   - name: PG_PORT
    #     value: "5432"
    #   - name: DEFAULT_FROM_EMAIL
    #     value: "noreply@nenkod.com"
    #   - name: DISABLE_SIGNUPS
    #     value: "true"
    #   - name: SMTP_USERNAME
    #     value: "noreply@nenkod.com"
    #   - name: SMTP_PASSWORD
    #     value: "Psychose1985@"
    #   - name: SMTP_DOMAIN
    #     value: "mail.nenkod.com"
    #   - name: SMTP_PORT
    #     value: "465"
    #   - name: LANGUAGE
    #     value: "fr"
  
    region: frankfurt
  
databases:
  - name: pg_tooljet
    databaseName: tooljet
    user: kernox
    plan: free
    region: frankfurt
  
  - name: pg_n8n
    databaseName: n8n
    user: kernox
    plan: free
    region: frankfurt
  
  # - name: appsmith
  #   type: web
  #   runtime: image
  #   plan: free
  #   image:
  #     url: bitnami/appsmith
  #   domains:
  #     - demo.appsmith.nenkod.com
  #   region: frankfurt

  # - name: mongo
  #   type: web
  #   runtime: image
  #   plan: free
  #   image:
  #     url: mongo
  #   region: frankfurt