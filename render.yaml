# render.yaml configuration for Baserow, n8n, and ToolJet in Frankfurt region

services:

  - name: n8n
    type: web
    runtime: image
    plan: free
    image: 
      url: n8nio/n8n:latest
    domains:
      - demo.n8n.nenkod.com
    envVars:
      - key: N8N_BASIC_AUTH_ACTIVE
        value: true

      - key: N8N_BASIC_AUTH_USER
        value: "admin"

      - key: N8N_BASIC_AUTH_PASSWORD
        value: "admin"

      - key: N8N_HOST
        value: "demo.n8n.nenkod.com"
      
    autoDeploy: true
    healthCheckPath: "/"
    region: frankfurt

  - name: nocodb
    type: web
    runtime: image
    plan: free
    image:
      url: nocodb/nocodb:latest
    domains:
      - demo.nocodb.nenkod.com
    region: frankfurt

  - name: tooljet
    type: web
    runtime: image
    plan: free
    image:
      url: tooljet/tooljet-ce
    domains:
      - demo.tooljet.nenkod.com
    startCommand: npm run start:prod
    envVars:
      - key: TOOLJET_DB_USER
        value: kernox
      - key: TOOLJET_DB
        value: tooljet
      - key: TOOLJET_DB_HOST
        fromDatabase:
          name: pg_common
          property: connectionString
      - key: PORT
        value: 80
      - key: PG_PORT
        value: 5432
      - key: PG_HOST
        fromDatabase:
          name: pg_common
          property: connectionString
      - key: PG_DB
        value: tooljet
      - key: LANGUAGE
        value: fr
      - key: SMTP_PORT
        sync: false
      - key: SMTP_DOMAIN
        sync: false
      - key: SMTP_PASSWORD
        sync: false
      - key: SMTP_USERkey
        sync: false
      - key: DISABLE_SIGNUPS
        value: false
      - key: DEFAULT_FROM_EMAIL
        value: webmaster@nenkod.com
      - key: PG_PASS
        sync: false
      - key: PG_USER
        value: kernox
      - key: SECRET_KEY_BASE
        generatedValue: true
      - key: LOCKBOX_MASTER_KEY
        generatedValue: true
      - key: TOOLJET_DB_PASS
        fromDatabase:
          name: pg_common
          property: passwordString
      - key: ENABLE_TOOLJET_DB
        sync: false
      - key: TOOLJET_HOST
        sync: false  
    dockerCommand: npm run start:prod
    region: frankfurt
  
databases:
  - name: pg_common
    databaseName: tooljet
    user: kernox
    plan: free
    region: frankfurt
  
  # - key: appsmith
  #   type: web
  #   runtime: image
  #   plan: free
  #   image:
  #     url: bitnami/appsmith
  #   domains:
  #     - demo.appsmith.nenkod.com
  #   region: frankfurt

  # - key: mongo
  #   type: web
  #   runtime: image
  #   plan: free
  #   image:
  #     url: mongo
  #   region: frankfurt

  # - name: baserow
  #   type: web
  #   runtime: image
  #   plan: free
  #   image: 
  #     url: baserow/baserow
  #   region: frankfurt